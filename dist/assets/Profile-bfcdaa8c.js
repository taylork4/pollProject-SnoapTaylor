import{d as W,a as v,s as X,t as Y,b as L,c as s,e as a,w as Z,v as ee,u as t,i as te,F as f,f as m,m as d,g as c,K as B,j as F,l as V,o as n,n as S,p as se,q as ne,r as I,J as N,y as J,L as ie}from"./index-4f959544.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";const g=p=>(se("data-v-b1907d13"),p=p(),ne(),p),ae={class:"header"},ce=g(()=>a("option",{value:""},"Filter by",-1)),de=["value"],le={class:"report"},ue=g(()=>a("h1",null," This is your profile! ",-1)),re=g(()=>a("h2",{id:"email"},null,-1)),_e=g(()=>a("h2",{id:"userId"},null,-1)),ve={key:0},he={key:0},ye={class:"pollQuestion"},fe=["onClick"],ke=["onClick"],me={key:1},ge={key:0,class:"pollButtons"},be={key:1,style:{display:"inline-block","margin-left":"10px"}},Ce={key:1},pe={key:0},xe={class:"pollQuestion"},Pe=["onClick"],we=["onClick"],Fe={key:1},Se={key:0,class:"pollButtons"},Ae={key:1,style:{display:"inline-block","margin-left":"10px"}},Qe={key:2},Be={key:0},Ie={class:"pollQuestion"},Ne=["onClick"],Ue=["onClick"],Ee={key:1},Re={key:0,class:"pollButtons"},$e={key:1,style:{display:"inline-block","margin-left":"10px"}},Te={key:3},De={key:0},Le={class:"pollQuestion"},Ve=["onClick"],Je=["onClick"],je={key:1},qe={key:0,class:"pollButtons"},ze={key:1,style:{display:"inline-block","margin-left":"10px"}},Ke={key:4},Me={class:"chart"},Oe={class:"bar-container"},Ge=g(()=>a("div",{class:"label"},"Favorites",-1)),He={class:"bar-container"},We=g(()=>a("div",{class:"label"},"Created",-1)),Xe={class:"bar-container"},Ye=g(()=>a("div",{class:"label"},"Responded",-1)),Ze=W({__name:"Profile",setup(p){const b=v(""),A=v("");let Q="",x="";const j=["Favorited Polls  ⭐","Polls Responded To","Polls Created","Statistics"];let h=v("");async function q(i){const l=I(F,"profile",i),e=await N(l);if(e.exists()){const u=e.data();u?O(u):console.log("No data found in document!")}else console.log("No such document!")}const z=X(F,"polls/public/allPolls");let C=v([]);Y(z).then(i=>{const l=i.docs.map(e=>({...e.data(),id:e.id}));return Promise.all(l)}).then(i=>{for(let l=0;l<i.length;l++)C.value[l]=i[l]}).catch(i=>{console.log(i.message)});const U=v(!0);L.onAuthStateChanged(function(i){i?(U.value=!0,b.value=i.uid):(U.value=!1,b.value="")});async function K(){await new Promise(i=>{V(A,l=>{x=l,i()}),V(b,l=>{Q=l,i()})}),q(x)}function M(i){i?(b.value=i.uid,A.value=i.email||"",i.uid):(b.value="",A.value="")}L.onAuthStateChanged(M),K(),console.log(`New value ${Q}`);let E=v(""),R=v(""),r=v([]),_=v([]),y=v([]),$=v(0),T=v(0),D=v(0);function O(i){E.value=i.firstName,R.value=i.lastName,r.value=i.favorited,_.value=i.created,y.value=i.responded;const l=r.value.length+_.value.length+y.value.length;$.value=r.value.length/l*100,T.value=_.value.length/l*100,D.value=y.value.length/l*100;const e=document.getElementById("userId"),u=document.getElementById("email");e&&u&&(e.textContent="User ID: "+Q,u.textContent="Email: "+x)}async function P(i,l){const e=I(F,"profile",x),u=await N(e);if(u.exists()){const o=u.data();o&&(o.favorited.includes(i)?(o.favorited=o.favorited.filter(k=>k!==i),await J(e,o)):(o.favorited.push(i),await J(e,o)))}}async function w(i,l){const e=I(F,"polls/public/allPolls",i),u=await N(e);confirm("Are you sure you want to delete your poll?")&&u.exists()&&await ie(e)}function G(i){console.log(i)}function H(){window.scrollTo({top:0,behavior:"smooth"})}return(i,l)=>(n(),s(f,null,[a("span",ae,[Z(a("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>te(h)?h.value=e:h=e)},[ce,(n(),s(f,null,m(j,e=>a("option",{value:e},d(e),9,de)),64))],512),[[ee,t(h)]])]),a("div",le,[ue,a("h2",null," First Name: "+d(t(E)),1),a("h2",null," Last Name: "+d(t(R)),1),re,_e]),t(h)==="Filter by"||t(h)===""?(n(),s("div",ve,[(n(!0),s(f,null,m(t(C),(e,u)=>(n(),s("div",{key:u},["pollQuestion"in e&&"genre"in e&&(t(r).includes(e.id)||t(y).includes(e.id)||t(_).includes(e.id))?(n(),s("span",he,[a("h2",ye,[a("span",{style:{top:"-5px"},class:"star",onClick:o=>P(e.id)},d(t(r).includes(e.id)?"★":"☆"),9,fe),t(_).includes(e.id)?(n(),s("span",{key:0,style:{top:"-5px"},class:"delete",onClick:o=>w(e.id)}," × ",8,ke)):c("",!0),S(" "+d(e.pollQuestion),1)])])):c("",!0),"pollChoices"in e&&"genre"in e&&"votes"in e?(n(),s("span",me,[(n(!0),s(f,null,m(e.pollChoices,(o,k)=>(n(),s("div",null,[o!==""&&(t(r).includes(e.id)||t(y).includes(e.id)||t(_).includes(e.id))?(n(),s("button",ge,d(o),1)):c("",!0),o!==""&&Array.isArray(e.votes)&&(t(r).includes(e.id)||t(y).includes(e.id)||t(_).includes(e.id))?(n(),s("p",be,d((100*(e.votes[k]/(e.votes[0]+e.votes[1]+e.votes[2]+e.votes[3]))).toFixed(2))+"% ",1)):c("",!0)]))),256))])):c("",!0)]))),128))])):c("",!0),t(h)==="Favorited Polls  ⭐"?(n(),s("div",Ce,[(n(!0),s(f,null,m(t(C),(e,u)=>(n(),s("div",{key:u},["pollQuestion"in e&&t(r).includes(e.id)?(n(),s("span",pe,[a("h2",null,d(G(t(r))),1),a("h2",xe,[a("span",{style:{top:"-5px"},class:"star",onClick:o=>P(e.id)},d(t(r).includes(e.id)?"★":"☆"),9,Pe),t(_).includes(e.id)?(n(),s("span",{key:0,style:{top:"-5px"},class:"delete",onClick:o=>w(e.id)}," × ",8,we)):c("",!0),S(" "+d(e.pollQuestion),1)])])):c("",!0),"pollChoices"in e&&"genre"in e&&"votes"in e?(n(),s("span",Fe,[(n(!0),s(f,null,m(e.pollChoices,(o,k)=>(n(),s("div",null,[o!==""&&t(r).includes(e.id)?(n(),s("button",Se,d(o),1)):c("",!0),o!==""&&Array.isArray(e.votes)&&t(r).includes(e.id)?(n(),s("p",Ae,d((100*(e.votes[k]/(e.votes[0]+e.votes[1]+e.votes[2]+e.votes[3]))).toFixed(2))+"%",1)):c("",!0)]))),256))])):c("",!0)]))),128))])):c("",!0),t(h)==="Polls Created"?(n(),s("div",Qe,[(n(!0),s(f,null,m(t(C),(e,u)=>(n(),s("div",{key:u},["pollQuestion"in e&&t(_).includes(e.id)?(n(),s("span",Be,[a("h2",Ie,[a("span",{style:{top:"-5px"},class:"star",onClick:o=>P(e.id)},d(t(r).includes(e.id)?"★":"☆"),9,Ne),t(_).includes(e.id)?(n(),s("span",{key:0,style:{top:"-5px"},class:"delete",onClick:o=>w(e.id)}," × ",8,Ue)):c("",!0),S(" "+d(e.pollQuestion),1)])])):c("",!0),"pollChoices"in e&&"genre"in e&&"votes"in e?(n(),s("span",Ee,[(n(!0),s(f,null,m(e.pollChoices,(o,k)=>(n(),s("div",null,[o!==""&&t(_).includes(e.id)?(n(),s("button",Re,d(o),1)):c("",!0),o!==""&&Array.isArray(e.votes)&&t(_).includes(e.id)?(n(),s("p",$e,d((100*(e.votes[k]/(e.votes[0]+e.votes[1]+e.votes[2]+e.votes[3]))).toFixed(2))+"%",1)):c("",!0)]))),256))])):c("",!0)]))),128))])):c("",!0),t(h)==="Polls Responded To"?(n(),s("div",Te,[(n(!0),s(f,null,m(t(C),(e,u)=>(n(),s("div",{key:u},["pollQuestion"in e&&t(y).includes(e.id)?(n(),s("span",De,[a("h2",Le,[a("span",{style:{top:"-5px"},class:"star",onClick:o=>P(e.id)},d(t(r).includes(e.id)?"★":"☆"),9,Ve),t(_).includes(e.id)?(n(),s("span",{key:0,style:{top:"-5px"},class:"delete",onClick:o=>w(e.id)}," × ",8,Je)):c("",!0),S(" "+d(e.pollQuestion),1)])])):c("",!0),"pollChoices"in e&&"genre"in e&&"votes"in e?(n(),s("span",je,[(n(!0),s(f,null,m(e.pollChoices,(o,k)=>(n(),s("div",null,[o!==""&&t(y).includes(e.id)?(n(),s("button",qe,d(o),1)):c("",!0),o!==""&&Array.isArray(e.votes)&&t(y).includes(e.id)?(n(),s("p",ze,d((100*(e.votes[k]/(e.votes[0]+e.votes[1]+e.votes[2]+e.votes[3]))).toFixed(2))+"%",1)):c("",!0)]))),256))])):c("",!0)]))),128))])):c("",!0),t(h)==="Statistics"?(n(),s("div",Ke,[a("div",Me,[a("div",Oe,[a("button",{class:"bar fav-bar",style:B({height:t($)+"%"})},d(t(r).length),5),Ge]),a("div",He,[a("button",{class:"bar cr-bar",style:B({height:t(T)+"%"})},d(t(_).length),5),We]),a("div",Xe,[a("button",{class:"bar resp-bar",style:B({height:t(D)+"%"})},d(t(y).length),5),Ye])])])):c("",!0),a("div",null,[a("button",{onClick:H,class:"back-to-top"},"Back to top")])],64))}});const st=oe(Ze,[["__scopeId","data-v-b1907d13"]]);export{st as default};
